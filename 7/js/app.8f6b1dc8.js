(function(e){function t(t){for(var a,n,o=t[0],c=t[1],u=t[2],f=0,v=[];f<o.length;f++)n=o[f],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&v.push(s[n][0]),s[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(v.length)v.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==s[c]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=r[0]))}return e}var a={},s={app:0},i=[];function n(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},2093:function(e,t,r){e.exports=r.p+"img/heart_active.19eff56d.svg"},"536d":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("header",{staticClass:"header"},[r("router-link",{staticClass:"header-logo",attrs:{tag:"button",to:"/"}},[e._v("Punk Beer")]),r("ul",{staticClass:"menu"},[r("router-link",{staticClass:"menu-item",attrs:{tag:"li",to:"/"}},[r("a",[e._v("Главная")])]),r("router-link",{staticClass:"menu-item",attrs:{tag:"li",to:"/favourites"}},[r("a",[e._v("Избранное")])])],1)],1),r("router-view")],1)},i=[],n=(r("cf25"),r("2877")),o={},c=Object(n["a"])(o,s,i,!1,null,null,null),u=c.exports,l=r("8c4f"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("form",{staticClass:"search",attrs:{action:"#"},on:{submit:function(t){return t.preventDefault(),e.loadSearch(t)}}},[a("input",{staticClass:"search-input",attrs:{type:"text",placeholder:"Поиск по названию"}}),a("button",{staticClass:"search-btn",attrs:{type:"submit"}},[a("svg",{staticStyle:{"enable-background":"new 0 0 30.239 30.239"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"30.239px",height:"30.239px",viewBox:"0 0 30.239 30.239","xml:space":"preserve"}},[a("path",{attrs:{d:"M20.194,3.46c-4.613-4.613-12.121-4.613-16.734,0c-4.612,4.614-4.612,12.121,0,16.735 c4.108,4.107,10.506,4.547,15.116,1.34c0.097,0.459,0.319,0.897, 0.676,1.254l6.718,6.718c0.979,0.977,2.561,0.977,3.535,0 c0.978-0.978,0.978-2.56,0-3.535l-6.718-6.72c-0.355-0.354-0.794-0.577-1.253-0.674C24.743,13.967,24.303,7.57,20.194,3.46z M18.073,18.074c-3.444,3.444-9.049,3.444-12.492,0c-3.442-3.444-3.442-9.048,0-12.492c3.443-3.443,9.048-3.443,12.492,0 C21.517,9.026,21.517,14.63,18.073,18.074z"}})])])]),a("div",{staticClass:"main"},[e.search?a("div",{staticClass:"beers-search"},[a("div",{staticClass:"beers-search__text"},[e._v('Результат поиска по запросу "'+e._s(e.searchReq)+'"')]),a("button",{staticClass:"beers-search__btn",on:{click:function(t){return t.preventDefault(),e.reset()}}},[e._v("Назад")])]):e._e(),a("div",{staticClass:"beers"},e._l(e.beerItems,(function(t){return a("div",{key:t.id,staticClass:"beer"},[a("div",{staticClass:"beer-img"},[a("img",{attrs:{src:t.image_url,alt:"Beer image"}})]),a("div",{staticClass:"beer-text"},[a("div",{staticClass:"beer-text__title"},[e._v(e._s(t.name))]),a("a",{staticClass:"beer-text__btn",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.toggleFavourite(t)}}},[1==t.favourite?a("img",{attrs:{src:r("2093"),alt:"Heart image"}}):a("img",{attrs:{src:r("fbe8"),alt:"Heart image"}})]),a("div",{staticClass:"beer-text__descr"},[e._v(e._s(t.description))])])])})),0),e.pagination?a("div",{staticClass:"pagination"},[e.page>1?a("a",{staticClass:"pagination-item pagination-before",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.loadPage(e.page-1)}}},[e._v("<")]):e._e(),a("div",{staticClass:"pagination-item pagination-current"},[e._v(e._s(e.page))]),a("a",{staticClass:"pagination-item pagination-after",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.loadPage(e.page+1)}}},[e._v(">")])]):e._e()])])},v=[],p=(r("841c"),{data:function(){return{pagination:!0,searchReq:"",search:!1}},methods:{loadPage:function(e){this.$store.dispatch("LOAD_BEERS_PAGE",e),window.scrollTo(0,0)},loadSearch:function(e){var t=document.querySelector(".search-input");""!=t.value&&(this.pagination=!1,this.search=!0,this.$store.dispatch("LOAD_BEERS_SEARCH",this.searchReq),this.searchReq=t.value),e.target.reset()},reset:function(){this.pagination=!0,this.search=!1,this.$store.dispatch("LOAD_BEERS_PAGE",1),this.searchReq=""},toggleFavourite:function(e){for(var t=0;t<this.favourites.length;t++)if(this.favourites[t].id==e.id)return void this.$store.dispatch("REMOVE_FAVOURITE",e);this.$store.dispatch("ADD_FAVOURITE",e)}},computed:{beerItems:function(){return this.$store.getters.beerPageItems},favourites:function(){return this.$store.getters.favourites},page:function(){return this.$store.getters.page}}}),g=p,m=(r("afba"),Object(n["a"])(g,f,v,!1,null,"08fa7af6",null)),b=m.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"favourites"},[a("div",{staticClass:"main"},[e.favourites.length<1?a("div",{staticClass:"no-favourites"},[e._v(" В избранном ещё ничего нет ")]):a("div",{staticClass:"beers"},e._l(e.favourites,(function(t){return a("div",{key:t.id,staticClass:"beer"},[a("div",{staticClass:"beer-img"},[a("img",{attrs:{src:t.image_url,alt:"Beer image"}})]),a("div",{staticClass:"beer-text"},[a("div",{staticClass:"beer-text__title"},[e._v(e._s(t.name))]),a("a",{staticClass:"beer-text__btn beer-text__btn_active",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),e.toggleFavourite(t)}}},[1==t.favourite?a("img",{attrs:{src:r("2093"),alt:"Heart image"}}):a("img",{attrs:{src:r("fbe8"),alt:"Heart image"}})]),a("div",{staticClass:"beer-text__descr"},[e._v(e._s(t.description))])])])})),0)])])},d=[],_={methods:{toggleFavourite:function(e){for(var t=0;t<this.favourites.length;t++)if(this.favourites[t].id==e.id)return void this.$store.dispatch("REMOVE_FAVOURITE",e);this.$store.dispatch("ADD_FAVOURITE",e)}},computed:{favourites:function(){return this.$store.getters.favourites}}},E=_,I=(r("ba0e"),Object(n["a"])(E,h,d,!1,null,"671c93ea",null)),P=I.exports;a["a"].use(l["a"]);var C=[{path:"/",name:"home",component:b},{path:"/favourites",name:"favourites",component:P},{path:"/*",name:"home",component:b}],O=new l["a"]({mode:"history",base:"",routes:C}),x=O,w=(r("4de4"),r("a15b"),r("d3b7"),r("1276"),r("2f62"));a["a"].use(w["a"]);var R=new w["a"].Store({state:{beerItems:[],beerPageItems:[],page:1},mutations:{ADD_BEERS:function(e,t){var r=t.beers,s=e.page;e.page=t.page,e.beerPageItems=[];var i=e.beerItems.length;if(s<=t.page)for(var n=0;n<r.length;n++)a["a"].set(e.beerPageItems,n,r[n]),a["a"].set(e.beerPageItems[n],e.beerPageItems[n].favourite,!1),a["a"].set(e.beerItems,i+n,r[n]),a["a"].set(e.beerItems[i+n],e.beerItems[i+n].favourite,!1);else for(var o=24*(t.page-1);o<24*t.page;o++)a["a"].set(e.beerPageItems,o-24*(t.page-1),e.beerItems[o])},ADD_FAVOURITE:function(e,t){for(var r=0;r<e.beerPageItems.length;r++)if(e.beerPageItems[r].id==t.id){a["a"].set(e.beerPageItems[r],e.beerPageItems[r].favourite,!0),e.beerPageItems[r].favourite=!0;break}t.favourite=!0;var s=e.beerPageItems,i=e.beerItems;e.beerPageItems=[],e.beerItems=[];for(var n=0;n<s.length;n++)a["a"].set(e.beerPageItems,n,s[n]);for(var o=0;o<i.length;o++)a["a"].set(e.beerItems,o,i[o])},REMOVE_FAVOURITE:function(e,t){for(var r=0;r<e.beerPageItems.length;r++)if(e.beerPageItems[r].id==t.id){a["a"].set(e.beerPageItems[r],e.beerPageItems[r].favourite,!1),e.beerPageItems[r].favourite=!1;break}t.favourite=!1;var s=e.beerPageItems,i=e.beerItems;e.beerPageItems=[],e.beerItems=[];for(var n=0;n<s.length;n++)a["a"].set(e.beerPageItems,n,s[n]);for(var o=0;o<i.length;o++)a["a"].set(e.beerItems,o,i[o])}},actions:{LOAD_BEERS_PAGE:function(e,t){var r=e.commit,a="https://api.punkapi.com/v2/beers?page=".concat(t,"&per_page=24");A(a).then((function(e){var a=JSON.parse(e);r("ADD_BEERS",{beers:a,page:t})})).catch((function(e){console.log(e)}))},LOAD_BEERS_SEARCH:function(e,t){var r=e.commit,a="https://api.punkapi.com/v2/beers?beer_name=".concat(t.toLowerCase().split(" ").join("_"));A(a).then((function(e){var t=JSON.parse(e);r("ADD_BEERS",t)})).catch((function(e){console.log(e)}))},ADD_FAVOURITE:function(e,t){var r=e.commit;r("ADD_FAVOURITE",t)},REMOVE_FAVOURITE:function(e,t){var r=e.commit;r("REMOVE_FAVOURITE",t)}},getters:{beerPageItems:function(e){return e.beerPageItems},favourites:function(e){return e.beerItems.filter((function(e){return 1==e.favourite}))},page:function(e){return e.page}}});function A(e){return new Promise((function(t,r){var a=new XMLHttpRequest;a.open("GET",e,!0),a.addEventListener("load",(function(){a.status<400?t(a.response):r(new Error("Request failed: "+a.statusText))})),a.addEventListener("error",(function(){r(new Error("Network error"))})),a.send()}))}a["a"].config.productionTip=!1,new a["a"]({router:x,store:R,render:function(e){return e(u)},mounted:function(){this.$store.dispatch("LOAD_BEERS_PAGE",1)}}).$mount("#app")},"6c50":function(e,t,r){},afba:function(e,t,r){"use strict";var a=r("536d"),s=r.n(a);s.a},ba0e:function(e,t,r){"use strict";var a=r("6c50"),s=r.n(a);s.a},cf25:function(e,t,r){"use strict";var a=r("fea6"),s=r.n(a);s.a},fbe8:function(e,t,r){e.exports=r.p+"img/heart.6f50991f.svg"},fea6:function(e,t,r){}});
//# sourceMappingURL=app.8f6b1dc8.js.map